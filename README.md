# FormulaFix 项目说明书

## 📖 项目简介

FormulaFix 是一款专业的 LaTeX/Markdown 转 Word/PDF 工具，专为学术论文、技术文档和数学公式密集型内容的创作者设计。它解决了传统文档转换工具在处理复杂数学公式时的格式错乱问题，提供了一站式的文档编辑、预览和转换解决方案。

### 核心价值
- **公式保真**：精确保留 LaTeX 数学公式的格式和布局
- **多格式支持**：支持 Markdown、LaTeX、纯文本等多种输入格式
- **专业输出**：生成符合学术标准的 Word 和 PDF 文档
- **用户友好**：直观的三栏布局，实时预览，简化操作流程

## ✨ 功能特性

### 📐 界面设计
- **三栏布局**：左侧格式设置区（25-30%）、中间输入编辑区（40-50%）、右侧输出预览区（25-30%）
- **拖拽调整**：支持拖拽分隔线自定义面板宽度
- **夜间模式**：内置深色主题，适合长时间编辑
- **响应式设计**：适配桌面端、平板端和移动端

### 🖊️ 输入编辑
- **多种输入模式**：支持 Markdown、LaTeX 和纯文本
- **语法高亮**：提升代码和公式的可读性
- **拖拽文件**：支持直接拖拽文件到编辑区
- **实时统计**：显示字数、公式数和图片数
- **自动保存**：防止意外丢失内容

### 🔧 格式设置
- **输出格式**：支持 Word (.docx) 和 PDF (.pdf)
- **文档模板**：提供学术论文、简历、报告等多种模板
- **页面设置**：可调整纸张大小、页边距、行间距
- **转换选项**：包含数学公式、保留图片质量、生成目录等

### 👁️ 输出预览
- **多种预览样式**：Word 样式、PDF 样式、网页样式
- **实时预览**：输入内容实时渲染到预览区
- **公式渲染**：使用 KaTeX 高精度渲染数学公式
- **缩放控制**：预览区可缩放查看细节
- **全屏预览**：支持进入全屏模式专注查看

### 🚀 转换功能
- **一键转换**：简单操作即可完成复杂的格式转换
- **批量处理**：支持同时转换多个文件
- **转换历史**：记录最近的转换操作
- **自定义命名**：可自定义输出文件名称

## 🚀 快速开始

### 环境要求
- Node.js 16.0 或更高版本
- npm 7.0 或更高版本

### 安装步骤
1. **克隆仓库**
   ```bash
   git clone https://github.com/Thy985/fixmath.git
   cd fixmath
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **启动开发服务器**
   ```bash
   npm run dev
   ```

4. **构建生产版本**
   ```bash
   npm run build
   ```

5. **预览生产版本**
   ```bash
   npm run preview
   ```

## 📝 使用指南

### 基本使用流程
1. **选择输入格式**：在中间面板顶部选择 Markdown、LaTeX 或纯文本
2. **输入内容**：在中间编辑区输入或粘贴您的内容
3. **设置输出格式**：在左侧面板选择 Word 或 PDF 输出格式
4. **调整设置**：根据需要调整文档模板、页面设置和转换选项
5. **预览效果**：在右侧面板查看实时预览效果
6. **开始转换**：点击左侧面板的"开始转换"按钮
7. **下载文件**：转换完成后，点击右侧面板的"导出"按钮下载文件

### 高级使用技巧
1. **数学公式编辑**
   - Markdown 模式：使用 `$` 包围行内公式，`$$` 包围块级公式
   - LaTeX 模式：直接输入标准 LaTeX 公式语法

2. **模板使用**
   - 在左侧面板选择适合的文档模板
   - 模板会自动应用到输出文档中，保持格式一致性

3. **夜间模式**
   - 点击顶部的"🌙 切换到夜间模式"按钮
   - 长时间编辑时可减少眼睛疲劳

4. **全屏预览**
   - 点击右侧面板的"📄 全屏预览"按钮
   - 专注查看文档的整体布局和格式

## 🔧 技术架构

### 技术栈
- **前端框架**：React.js 18.x + Hooks
- **状态管理**：Context API
- **数学公式渲染**：KaTeX
- **Markdown 解析**：marked
- **PDF 生成**：html2pdf.js
- **Word 生成**：docx.js
- **机器学习**：TensorFlow.js（用于公式识别）
- **构建工具**：Vite
- **样式方案**：CSS3 + CSS 变量

### 架构设计
- **组件化设计**：将界面拆分为多个独立、可复用的组件
- **状态管理**：使用 Context API 实现全局状态共享
- **模块化**：将功能逻辑拆分为独立的模块，提高代码可维护性
- **性能优化**：使用防抖、虚拟滚动等技术提升性能

### 核心模块
1. **输入处理模块**：处理不同格式的输入内容
2. **公式渲染模块**：使用 KaTeX 渲染数学公式
3. **文档转换模块**：将输入内容转换为 Word 或 PDF 格式
4. **预览模块**：实时显示转换后的效果
5. **模板管理模块**：管理和应用文档模板

## ❓ 常见问题

### Q: 转换后的公式显示不正确怎么办？
**A:** 请确保您使用了标准的 LaTeX 语法，对于复杂公式，建议在 LaTeX 模式下编辑。如果问题仍然存在，可以尝试调整转换选项中的"包含数学公式"设置。

### Q: 如何导入现有文件进行编辑？
**A:** 您可以直接将文件拖拽到中间编辑区，或使用快捷键 `Ctrl+V` 粘贴文件内容。目前支持 Markdown、LaTeX 和纯文本文件。

### Q: 转换大文件时速度很慢，有什么解决方案？
**A:** 对于包含大量数学公式的大文件，转换速度可能会受到影响。建议：
1. 分割大文件为多个小文件进行转换
2. 关闭不必要的转换选项，如"生成目录"
3. 确保您的设备有足够的内存和处理器资源

### Q: 可以自定义文档模板吗？
**A:** 目前 FormulaFix 提供了预设的文档模板，包括学术论文、简历和报告模板。未来版本将支持用户自定义模板功能。

### Q: 支持哪些浏览器？
**A:** FormulaFix 支持所有现代浏览器，包括 Chrome、Firefox、Safari 和 Edge 的最新版本。建议使用 Chrome 以获得最佳性能和兼容性。

## 🤝 贡献指南

我们欢迎社区贡献者参与 FormulaFix 的开发和改进。如果您有兴趣为项目贡献代码，请按照以下步骤操作：

1. **Fork 仓库**：在 GitHub 上 Fork FormulaFix 仓库
2. **创建分支**：为您的功能或修复创建一个新的分支
3. **提交更改**：实现您的功能或修复，并提交更改
4. **创建 Pull Request**：向主仓库提交 Pull Request，描述您的更改

### 代码规范
- 使用 ES6+ 语法
- 遵循 React 最佳实践
- 为新功能添加适当的注释
- 确保代码通过 lint 检查

## 📄 许可证

FormulaFix 项目采用 MIT 许可证，详见 [LICENSE](LICENSE) 文件。

## 📞 联系我们

如果您有任何问题、建议或反馈，欢迎通过以下方式联系我们：

- **GitHub Issues**：在仓库中创建 Issue
- **Email**：[thy985@example.com](mailto:thy985@example.com)

---

**FormulaFix - 让数学公式转换更简单**

*Version: 1.0.0*
*Last Updated: 2026-01-15*
